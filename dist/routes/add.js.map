{"version":3,"sources":["../../routes/add.js"],"names":["router","Router","http","require","post","req","res","next","detail","body","postData","mainType","subType","options","host","address","replace","port","path","headers","method","requ","request","resp","on","chunk","send","JSON","parse","write","end","module","exports"],"mappings":";;AACA;;;;;;AACA,IAAIA,SAAS,kBAAQC,MAAR,EAAb,C,CAFA;;AAGA,IAAIC,OAAOC,QAAQ,MAAR,CAAX;;AAEA;AACAH,OAAOI,IAAP,CAAY,GAAZ,EAAiB,UAAUC,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;AACvC,QAAIC,SAASH,IAAII,IAAJ,CAASD,MAAtB;AACA,QAAIE,WAAWF,OAAOG,QAAP,GAAkB,GAAlB,GAAwBH,OAAOI,OAA9C;AACA,QAAIC,UAAU;AACVC,cAAMN,OAAOO,OAAP,CAAeC,OAAf,CAAuB,SAAvB,EAAkC,EAAlC,CADI;AAEVC,cAAM,IAFI;AAGVC,cAAM,+BAHI;AAIVC,iBAAS;AACL,4BAAgB;AADX,SAJC;AAOVC,gBAAQ;AAPE,KAAd;AASA,QAAIC,OAAOnB,KAAKoB,OAAL,CAAaT,OAAb,EAAsB,gBAAQ;AACrCU,aAAKC,EAAL,CAAQ,MAAR,EAAgB,UAAUC,KAAV,EAAiB;AAC7BnB,gBAAIoB,IAAJ,CAASC,KAAKC,KAAL,CAAWH,KAAX,CAAT;AACH,SAFD;AAGH,KAJU,CAAX;AAKAJ,SAAKQ,KAAL,CAAWnB,QAAX;AACAW,SAAKS,GAAL;AACH,CAnBD;;AAqBAC,OAAOC,OAAP,GAAiBhC,MAAjB","file":"add.js","sourcesContent":["// var express = require('express');\r\nimport express from 'express'\r\nvar router = express.Router();\r\nlet http = require('http')\r\n\r\n/* 上传文件. */\r\nrouter.post('/', function (req, res, next) {\r\n    let detail = req.body.detail\r\n    let postData = detail.mainType + '-' + detail.subType\r\n    let options = {\r\n        host: detail.address.replace('http://', ''),\r\n        port: 8080,\r\n        path: '/api/baseStation15/detailFile',\r\n        headers: {\r\n            'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8',\r\n        },\r\n        method: 'POST',\r\n    };\r\n    let requ = http.request(options, resp => {\r\n        resp.on('data', function (chunk) {\r\n            res.send(JSON.parse(chunk));\r\n        });\r\n    })\r\n    requ.write(postData)\r\n    requ.end()\r\n});\r\n\r\nmodule.exports = router;\r\n"]}