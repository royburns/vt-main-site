{"version":3,"sources":["../../routes/delete.js"],"names":["express","require","router","Router","http","qs","post","req","res","next","reqBody","body","siteName","mainType","files","filesArr","map","item","resName","console","log","options","host","port","path","headers","method","stringify","requ","request","resp","on","chunk","JSON","parse","send","write","end","module","exports"],"mappings":";;AAAA,IAAIA,UAAUC,QAAQ,SAAR,CAAd;AACA,IAAIC,SAASF,QAAQG,MAAR,EAAb;AACA,IAAIC,OAAOH,QAAQ,MAAR,CAAX;AACA,IAAII,KAAKJ,QAAQ,aAAR,CAAT;;AAEA;AACAC,OAAOI,IAAP,CAAY,GAAZ,EAAiB,UAAUC,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;AACvC,QAAIC,UAAUH,IAAII,IAAlB;AACA,QAAIC,WAAWF,QAAQE,QAAvB;AACA,QAAIC,WAAWH,QAAQI,KAAR,CAAc,CAAd,EAAiBD,QAAhC;AACA,QAAIE,WAAWL,QAAQI,KAAR,CAAcE,GAAd,CAAkB,UAACC,IAAD,EAAU;AACvC,eAAOA,KAAKC,OAAZ;AACH,KAFc,CAAf;AAGAC,YAAQC,GAAR,CAAYL,QAAZ;AACA,QAAIM,UAAU;AACVC,cAAMV,QADI;AAEVW,cAAM,IAFI;AAGVC,cAAM,SAHI;AAIVC,iBAAS;AACL,4BAAgB;AADX,SAJC;AAQVC,gBAAQ;AARE,KAAd;AAUAP,YAAQC,GAAR,CAAYP,QAAZ,EAAsBE,QAAtB,EAA+BV,GAAGsB,SAAH,CAAa;AACxCd,kBAAUA,QAD8B;AAExCC,eAAOC;AAFiC,KAAb,CAA/B;AAIA,QAAIa,OAAOxB,KAAKyB,OAAL,CAAaR,OAAb,EAAsB,gBAAQ;AACrCS,aAAKC,EAAL,CAAQ,MAAR,EAAgB,UAAUC,KAAV,EAAiB;AAC7Bb,oBAAQC,GAAR,CAAYa,KAAKC,KAAL,CAAWF,KAAX,CAAZ;AACAxB,gBAAI2B,IAAJ,CAASF,KAAKC,KAAL,CAAWF,KAAX,CAAT;AACH,SAHD;AAIH,KALU,CAAX;AAMAJ,SAAKQ,KAAL,CAAW/B,GAAGsB,SAAH,CAAa;AACpBd,kBAAUA,QADU;AAEpBC,eAAOC;AAFa,KAAb,CAAX;AAIAa,SAAKS,GAAL;AACH,CAjCD;;AAmCAC,OAAOC,OAAP,GAAiBrC,MAAjB","file":"delete.js","sourcesContent":["var express = require('express');\r\nvar router = express.Router();\r\nlet http = require('http')\r\nlet qs = require('querystring')\r\n\r\n/* 删除文件 */\r\nrouter.post('/', function (req, res, next) {\r\n    let reqBody = req.body\r\n    let siteName = reqBody.siteName\r\n    let mainType = reqBody.files[0].mainType\r\n    let filesArr = reqBody.files.map((item) => {\r\n        return item.resName\r\n    })\r\n    console.log(filesArr)\r\n    let options = {\r\n        host: siteName,\r\n        port: 3000,\r\n        path: '/delete',\r\n        headers: {\r\n            'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8',\r\n            // 'Content-Type': 'application/json; charset=UTF-8'\r\n        },\r\n        method: 'POST',\r\n    };\r\n    console.log(mainType, filesArr,qs.stringify({\r\n        mainType: mainType,\r\n        files: filesArr\r\n    }))\r\n    let requ = http.request(options, resp => {\r\n        resp.on('data', function (chunk) {\r\n            console.log(JSON.parse(chunk))\r\n            res.send(JSON.parse(chunk));\r\n        });\r\n    })\r\n    requ.write(qs.stringify({\r\n        mainType: mainType,\r\n        files: filesArr\r\n    }))\r\n    requ.end()\r\n});\r\n\r\nmodule.exports = router;\r\n"]}