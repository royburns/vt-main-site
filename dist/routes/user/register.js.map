{"version":3,"sources":["../../../routes/user/register.js"],"names":["express","require","router","Router","insertData","getUuid","post","req","res","next","body","username","password","checkPassword","console","log","json","status","message","test","id","type","then","param","catch","module","exports"],"mappings":";;AAAA,IAAMA,UAAUC,QAAQ,SAAR,CAAhB;AACA,IAAMC,SAASF,QAAQG,MAAR,EAAf;AACA,IAAMC,aAAaH,QAAQ,2BAAR,CAAnB;AACA,IAAMI,UAAUJ,QAAQ,iBAAR,CAAhB;;AAGA;AACAC,OAAOI,IAAP,CAAY,GAAZ,EAAiB,UAAUC,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;AACvC;AACA;AACA;AAHuC,oBAIGF,IAAIG,IAJP;AAAA,QAIlCC,QAJkC,aAIlCA,QAJkC;AAAA,QAIxBC,QAJwB,aAIxBA,QAJwB;AAAA,QAIdC,aAJc,aAIdA,aAJc;;AAKvCC,YAAQC,GAAR,CAAYR,IAAIG,IAAhB;AACA,QAAIC,aAAa,EAAb,IAAmBC,aAAa,EAAhC,IAAsCC,kBAAkB,EAA5D,EAAgE;AAC5DL,YAAIQ,IAAJ,CAAS;AACLC,oBAAQ,OADH;AAELC,qBAAS;AAFJ,SAAT;AAIH,KALD,MAKO,IAAI,CAAC,8DAA8DC,IAA9D,CAAmEP,QAAnE,CAAL,EAAmF;AACtFJ,YAAIQ,IAAJ,CAAS;AACLC,oBAAQ,OADH;AAELC,qBAAS;AAFJ,SAAT;AAIH,KALM,MAKA,IAAIN,aAAaC,aAAjB,EAAgC;AACnCL,YAAIQ,IAAJ,CAAS;AACLC,oBAAQ,OADH;AAELC,qBAAS;AAFJ,SAAT;AAIH,KALM,MAKA;AACHd,mBAAW,EAACgB,IAAIf,SAAL,EAAgBM,UAAUA,QAA1B,EAAoCC,UAAUA,QAA9C,EAAwDS,MAAM,CAA9D,EAAX,EACKC,IADL,CACU,UAACC,KAAD,EAAW;AACbf,gBAAIQ,IAAJ,CAAS;AACLC,wBAAQ,SADH;AAELC,yBAAS;AAFJ,aAAT;AAIH,SANL,EAOKM,KAPL,CAOW,UAACD,KAAD,EAAW;AACdT,oBAAQC,GAAR,CAAYQ,KAAZ;AACH,SATL;AAYH;AACJ,CAnCD;;AAqCAE,OAAOC,OAAP,GAAiBxB,MAAjB","file":"register.js","sourcesContent":["const express = require('express');\r\nconst router = express.Router();\r\nconst insertData = require('../../util/mongodb/insert')\r\nconst getUuid = require('../../util/uuid')\r\n\r\n\r\n/* login. */\r\nrouter.post('/', function (req, res, next) {\r\n    // let username = req.body.username\r\n    // let password = req.body.password\r\n    // let checkPassword = req.body.checkPassword\r\n    let {username, password, checkPassword} = req.body\r\n    console.log(req.body)\r\n    if (username === '' || password === '' || checkPassword === '') {\r\n        res.json({\r\n            status: 'ERROR',\r\n            message: '注册信息不完整'\r\n        })\r\n    } else if (!/^(?![a-zA-z]+$)(?!\\d+$)(?![!@#$%^&*]+$)[a-zA-Z\\d!@#$%^&*]+$/.test(password)) {\r\n        res.json({\r\n            status: 'ERROR',\r\n            message: '密码格式不正确'\r\n        })\r\n    } else if (password !== checkPassword) {\r\n        res.json({\r\n            status: 'ERROR',\r\n            message: '两次密码输入不一致'\r\n        })\r\n    } else {\r\n        insertData({id: getUuid(), username: username, password: password, type: 0})\r\n            .then((param) => {\r\n                res.json({\r\n                    status: 'SUCCESS',\r\n                    message: '注册成功'\r\n                })\r\n            })\r\n            .catch((param) => {\r\n                console.log(param)\r\n            })\r\n\r\n\r\n    }\r\n});\r\n\r\nmodule.exports = router;"]}